\hypertarget{json__object__iterator_8c}{}\doxysection{src/libs/external/json-\/c/json\+\_\+object\+\_\+iterator.c File Reference}
\label{json__object__iterator_8c}\index{src/libs/external/json-\/c/json\_object\_iterator.c@{src/libs/external/json-\/c/json\_object\_iterator.c}}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include \char`\"{}json.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}json\+\_\+object\+\_\+private.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}json\+\_\+object\+\_\+iterator.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} \mbox{\hyperlink{json__object__iterator_8c_a925eb97b5aa5b64986a0f663f53cf0fa}{json\+\_\+object\+\_\+iter\+\_\+begin}} (struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj)
\item 
struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} \mbox{\hyperlink{json__object__iterator_8c_a1fa3784395fb14496e3f1a1633028fd4}{json\+\_\+object\+\_\+iter\+\_\+end}} (const struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj)
\item 
void \mbox{\hyperlink{json__object__iterator_8c_aa98a310c340f6d9b4eeecb673aa5e240}{json\+\_\+object\+\_\+iter\+\_\+next}} (struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$iter)
\item 
const char $\ast$ \mbox{\hyperlink{json__object__iterator_8c_af17775b9b812a4206a84e4d3fb5774ab}{json\+\_\+object\+\_\+iter\+\_\+peek\+\_\+name}} (const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$iter)
\item 
struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__object__iterator_8c_a47b0af7f1722c10475dffd29efc0b89d}{json\+\_\+object\+\_\+iter\+\_\+peek\+\_\+value}} (const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$iter)
\item 
json\+\_\+bool \mbox{\hyperlink{json__object__iterator_8c_a878ca25f72b339882aa2607ac938e79c}{json\+\_\+object\+\_\+iter\+\_\+equal}} (const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$iter1, const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$iter2)
\item 
struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} \mbox{\hyperlink{json__object__iterator_8c_af30f56ca510d59da42e5592f9a436c10}{json\+\_\+object\+\_\+iter\+\_\+init\+\_\+default}} (void)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const void $\ast$ \mbox{\hyperlink{json__object__iterator_8c_a6487cef05233a16b7aa20327887427ae}{k\+Object\+End\+Iter\+Value}} = NULL
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Copyright (c) 2009-\/2012 Hewlett-\/\+Packard Development Company, L.\+P.

This library is free software; you can redistribute it and/or modify it under the terms of the MIT license. See COPYING for details. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{json__object__iterator_8c_a925eb97b5aa5b64986a0f663f53cf0fa}\label{json__object__iterator_8c_a925eb97b5aa5b64986a0f663f53cf0fa}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_begin@{json\_object\_iter\_begin}}
\index{json\_object\_iter\_begin@{json\_object\_iter\_begin}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_begin()}{json\_object\_iter\_begin()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} json\+\_\+object\+\_\+iter\+\_\+begin (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \begin{DoxyNote}{Note}
json\+\_\+object\+\_\+get\+\_\+object will return NULL if passed NULL or a non-\/json\+\_\+type\+\_\+object instance

For a pair-\/less Object, head is NULL, which matches our definition of the \char`\"{}end\char`\"{} iterator
\end{DoxyNote}
\mbox{\Hypertarget{json__object__iterator_8c_a1fa3784395fb14496e3f1a1633028fd4}\label{json__object__iterator_8c_a1fa3784395fb14496e3f1a1633028fd4}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_end@{json\_object\_iter\_end}}
\index{json\_object\_iter\_end@{json\_object\_iter\_end}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_end()}{json\_object\_iter\_end()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} json\+\_\+object\+\_\+iter\+\_\+end (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \mbox{\Hypertarget{json__object__iterator_8c_a878ca25f72b339882aa2607ac938e79c}\label{json__object__iterator_8c_a878ca25f72b339882aa2607ac938e79c}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_equal@{json\_object\_iter\_equal}}
\index{json\_object\_iter\_equal@{json\_object\_iter\_equal}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_equal()}{json\_object\_iter\_equal()}}
{\footnotesize\ttfamily json\+\_\+bool json\+\_\+object\+\_\+iter\+\_\+equal (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$}]{iter1,  }\item[{const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$}]{iter2 }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \mbox{\Hypertarget{json__object__iterator_8c_af30f56ca510d59da42e5592f9a436c10}\label{json__object__iterator_8c_af30f56ca510d59da42e5592f9a436c10}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_init\_default@{json\_object\_iter\_init\_default}}
\index{json\_object\_iter\_init\_default@{json\_object\_iter\_init\_default}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_init\_default()}{json\_object\_iter\_init\_default()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} json\+\_\+object\+\_\+iter\+\_\+init\+\_\+default (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \begin{DoxyNote}{Note}
Make this a negative, invalid value, such that accidental access to it would likely be trapped by the hardware as an invalid address.
\end{DoxyNote}
\mbox{\Hypertarget{json__object__iterator_8c_aa98a310c340f6d9b4eeecb673aa5e240}\label{json__object__iterator_8c_aa98a310c340f6d9b4eeecb673aa5e240}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_next@{json\_object\_iter\_next}}
\index{json\_object\_iter\_next@{json\_object\_iter\_next}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_next()}{json\_object\_iter\_next()}}
{\footnotesize\ttfamily void json\+\_\+object\+\_\+iter\+\_\+next (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \mbox{\Hypertarget{json__object__iterator_8c_af17775b9b812a4206a84e4d3fb5774ab}\label{json__object__iterator_8c_af17775b9b812a4206a84e4d3fb5774ab}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_peek\_name@{json\_object\_iter\_peek\_name}}
\index{json\_object\_iter\_peek\_name@{json\_object\_iter\_peek\_name}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_peek\_name()}{json\_object\_iter\_peek\_name()}}
{\footnotesize\ttfamily const char$\ast$ json\+\_\+object\+\_\+iter\+\_\+peek\+\_\+name (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 \mbox{\Hypertarget{json__object__iterator_8c_a47b0af7f1722c10475dffd29efc0b89d}\label{json__object__iterator_8c_a47b0af7f1722c10475dffd29efc0b89d}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!json\_object\_iter\_peek\_value@{json\_object\_iter\_peek\_value}}
\index{json\_object\_iter\_peek\_value@{json\_object\_iter\_peek\_value}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{json\_object\_iter\_peek\_value()}{json\_object\_iter\_peek\_value()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+object\+\_\+iter\+\_\+peek\+\_\+value (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structjson__object__iterator}{json\+\_\+object\+\_\+iterator}} $\ast$}]{iter }\end{DoxyParamCaption})}

\DoxyHorRuler{0}
 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{json__object__iterator_8c_a6487cef05233a16b7aa20327887427ae}\label{json__object__iterator_8c_a6487cef05233a16b7aa20327887427ae}} 
\index{json\_object\_iterator.c@{json\_object\_iterator.c}!kObjectEndIterValue@{kObjectEndIterValue}}
\index{kObjectEndIterValue@{kObjectEndIterValue}!json\_object\_iterator.c@{json\_object\_iterator.c}}
\doxysubsubsection{\texorpdfstring{kObjectEndIterValue}{kObjectEndIterValue}}
{\footnotesize\ttfamily const void$\ast$ k\+Object\+End\+Iter\+Value = NULL\hspace{0.3cm}{\ttfamily [static]}}

How It Works

For each JSON Object, json-\/c maintains a linked list of zero or more \mbox{\hyperlink{structlh__entry}{lh\+\_\+entry}} (link-\/hash entry) structures inside the Object\textquotesingle{}s link-\/hash table (\mbox{\hyperlink{structlh__table}{lh\+\_\+table}}).

Each \mbox{\hyperlink{structlh__entry}{lh\+\_\+entry}} structure on the JSON Object\textquotesingle{}s linked list represents a single name/value pair. The \char`\"{}next\char`\"{} field of the last \mbox{\hyperlink{structlh__entry}{lh\+\_\+entry}} in the list is set to NULL, which terminates the list.

We represent a valid iterator that refers to an actual name/value pair via a pointer to the pair\textquotesingle{}s \mbox{\hyperlink{structlh__entry}{lh\+\_\+entry}} structure set as the iterator\textquotesingle{}s opaque\+\_\+ field.

We follow json-\/c\textquotesingle{}s current pair list representation by representing a valid \char`\"{}end\char`\"{} iterator (one that refers past the last pair) with a NULL value in the iterator\textquotesingle{}s opaque\+\_\+ field.

A JSON Object without any pairs in it will have the \char`\"{}head\char`\"{} field of its \mbox{\hyperlink{structlh__table}{lh\+\_\+table}} structure set to NULL. For such an object, json\+\_\+object\+\_\+iter\+\_\+begin will return an iterator with the opaque\+\_\+ field set to NULL, which is equivalent to the \char`\"{}end\char`\"{} iterator.

When iterating, we simply update the iterator\textquotesingle{}s opaque\+\_\+ field to point to the next \mbox{\hyperlink{structlh__entry}{lh\+\_\+entry}} structure in the linked list. opaque\+\_\+ will become NULL once we iterate past the last pair in the list, which makes the iterator equivalent to the \char`\"{}end\char`\"{} iterator. Our current representation of the \char`\"{}end\char`\"{} iterator;

\begin{DoxyNote}{Note}
May not always be NULL 
\end{DoxyNote}
