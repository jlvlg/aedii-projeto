\hypertarget{json__pointer_8h}{}\doxysection{src/libs/external/json-\/c/json\+\_\+pointer.h File Reference}
\label{json__pointer_8h}\index{src/libs/external/json-\/c/json\_pointer.h@{src/libs/external/json-\/c/json\_pointer.h}}


JSON Pointer (RFC 6901) implementation for retrieving objects from a json-\/c object tree.  


{\ttfamily \#include \char`\"{}json\+\_\+object.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__pointer_8h_aff88937e32b0ba6ffbd07cb4b1919053}{json\+\_\+pointer\+\_\+get}} (struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj, const char $\ast$path, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$res)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__pointer_8h_af0ac03df64b215d05041e8007ed0233d}{json\+\_\+pointer\+\_\+getf}} (struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$res, const char $\ast$path\+\_\+fmt,...)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}{json\+\_\+pointer\+\_\+set}} (struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$obj, const char $\ast$path, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$value)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__pointer_8h_a66f1f98a2ce085c19f6750193b4c726d}{json\+\_\+pointer\+\_\+setf}} (struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$obj, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$value, const char $\ast$path\+\_\+fmt,...)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
JSON Pointer (RFC 6901) implementation for retrieving objects from a json-\/c object tree. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{json__pointer_8h_aff88937e32b0ba6ffbd07cb4b1919053}\label{json__pointer_8h_aff88937e32b0ba6ffbd07cb4b1919053}} 
\index{json\_pointer.h@{json\_pointer.h}!json\_pointer\_get@{json\_pointer\_get}}
\index{json\_pointer\_get@{json\_pointer\_get}!json\_pointer.h@{json\_pointer.h}}
\doxysubsubsection{\texorpdfstring{json\_pointer\_get()}{json\_pointer\_get()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+pointer\+\_\+get (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj,  }\item[{const char $\ast$}]{path,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$}]{res }\end{DoxyParamCaption})}

Retrieves a JSON sub-\/object from inside another JSON object using the JSON pointer notation as defined in RFC 6901 \href{https://tools.ietf.org/html/rfc6901}{\texttt{ https\+://tools.\+ietf.\+org/html/rfc6901}}

The returned JSON sub-\/object is equivalent to parsing manually the \textquotesingle{}obj\textquotesingle{} JSON tree ; i.\+e. it\textquotesingle{}s not a new object that is created, but rather a pointer inside the JSON tree.

Internally, this is equivalent to doing a series of \textquotesingle{}\mbox{\hyperlink{json__object_8h_a1a097805abb53b4c8a60d573730a8939}{json\+\_\+object\+\_\+object\+\_\+get()}}\textquotesingle{} and \textquotesingle{}\mbox{\hyperlink{json__object_8h_a676711a76545d4ec65cc75f100f5fd19}{json\+\_\+object\+\_\+array\+\_\+get\+\_\+idx()}}\textquotesingle{} along the given \textquotesingle{}path\textquotesingle{}.

Note that the \textquotesingle{}path\textquotesingle{} string supports \textquotesingle{}printf()\textquotesingle{} type arguments, so, whatever is added after the \textquotesingle{}res\textquotesingle{} param will be treated as an argument for \textquotesingle{}path\textquotesingle{} Example\+: json\+\_\+pointer\+\_\+get(obj, \char`\"{}/foo/\%d/\%s\char`\"{}, \&res, 0, bar) This means, that you need to escape \textquotesingle{}\textquotesingle{} with \textquotesingle{}\%\textquotesingle{} (just like in printf())


\begin{DoxyParams}{Parameters}
{\em obj} & the json\+\_\+object instance/tree from where to retrieve sub-\/objects \\
\hline
{\em path} & a (RFC6901) string notation for the sub-\/object to retrieve \\
\hline
{\em res} & a pointer that stores a reference to the json\+\_\+object associated with the given path\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative if an error (or not found), or 0 if succeeded 
\end{DoxyReturn}
\mbox{\Hypertarget{json__pointer_8h_af0ac03df64b215d05041e8007ed0233d}\label{json__pointer_8h_af0ac03df64b215d05041e8007ed0233d}} 
\index{json\_pointer.h@{json\_pointer.h}!json\_pointer\_getf@{json\_pointer\_getf}}
\index{json\_pointer\_getf@{json\_pointer\_getf}!json\_pointer.h@{json\_pointer.h}}
\doxysubsubsection{\texorpdfstring{json\_pointer\_getf()}{json\_pointer\_getf()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+pointer\+\_\+getf (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$}]{res,  }\item[{const char $\ast$}]{path\+\_\+fmt,  }\item[{}]{... }\end{DoxyParamCaption})}

This is a variant of \textquotesingle{}\mbox{\hyperlink{json__pointer_8h_aff88937e32b0ba6ffbd07cb4b1919053}{json\+\_\+pointer\+\_\+get()}}\textquotesingle{} that supports printf() style arguments.

Example\+: json\+\_\+pointer\+\_\+getf(obj, res, \char`\"{}/foo/\%d/\%s\char`\"{}, 0, bak) This also means that you need to escape \textquotesingle{}\textquotesingle{} with \textquotesingle{}\%\textquotesingle{} (just like in printf())

Please take into consideration all recommended \textquotesingle{}printf()\textquotesingle{} format security aspects when using this function.


\begin{DoxyParams}{Parameters}
{\em obj} & the json\+\_\+object instance/tree to which to add a sub-\/object \\
\hline
{\em res} & a pointer that stores a reference to the json\+\_\+object associated with the given path \\
\hline
{\em path\+\_\+fmt} & a printf() style format for the path\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative if an error (or not found), or 0 if succeeded 
\end{DoxyReturn}
\mbox{\Hypertarget{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}\label{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}} 
\index{json\_pointer.h@{json\_pointer.h}!json\_pointer\_set@{json\_pointer\_set}}
\index{json\_pointer\_set@{json\_pointer\_set}!json\_pointer.h@{json\_pointer.h}}
\doxysubsubsection{\texorpdfstring{json\_pointer\_set()}{json\_pointer\_set()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+pointer\+\_\+set (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$}]{obj,  }\item[{const char $\ast$}]{path,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{value }\end{DoxyParamCaption})}

Sets JSON object \textquotesingle{}value\textquotesingle{} in the \textquotesingle{}obj\textquotesingle{} tree at the location specified by the \textquotesingle{}path\textquotesingle{}. \textquotesingle{}path\textquotesingle{} is JSON pointer notation as defined in RFC 6901 \href{https://tools.ietf.org/html/rfc6901}{\texttt{ https\+://tools.\+ietf.\+org/html/rfc6901}}

Note that \textquotesingle{}obj\textquotesingle{} is a double pointer, mostly for the \char`\"{}\char`\"{} (empty string) case, where the entire JSON object would be replaced by \textquotesingle{}value\textquotesingle{}. In the case of the \char`\"{}\char`\"{} path, the object at \textquotesingle{}$\ast$obj\textquotesingle{} will have it\textquotesingle{}s refcount decremented with \textquotesingle{}\mbox{\hyperlink{json__object_8h_afabf61f932cd64a4122ca8092452eed5}{json\+\_\+object\+\_\+put()}}\textquotesingle{} and the \textquotesingle{}value\textquotesingle{} object will be assigned to it.

For other cases (JSON sub-\/objects) ownership of \textquotesingle{}value\textquotesingle{} will be transferred into \textquotesingle{}$\ast$obj\textquotesingle{} via \textquotesingle{}\mbox{\hyperlink{json__object_8h_a27bd808a022251059a43f1f6370441cd}{json\+\_\+object\+\_\+object\+\_\+add()}}\textquotesingle{} \& \textquotesingle{}\mbox{\hyperlink{json__object_8h_a1ac0ccdbc13a25da7d8b2dc9e421dfad}{json\+\_\+object\+\_\+array\+\_\+put\+\_\+idx()}}\textquotesingle{}, so the only time the refcount should be decremented for \textquotesingle{}value\textquotesingle{} is when the return value of \textquotesingle{}\mbox{\hyperlink{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}{json\+\_\+pointer\+\_\+set()}}\textquotesingle{} is negative (meaning the \textquotesingle{}value\textquotesingle{} object did not get set into \textquotesingle{}$\ast$obj\textquotesingle{}).

That also implies that \textquotesingle{}\mbox{\hyperlink{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}{json\+\_\+pointer\+\_\+set()}}\textquotesingle{} does not do any refcount incrementing. (Just that single decrement that was mentioned above).

Note that the \textquotesingle{}path\textquotesingle{} string supports \textquotesingle{}printf()\textquotesingle{} type arguments, so, whatever is added after the \textquotesingle{}value\textquotesingle{} param will be treated as an argument for \textquotesingle{}path\textquotesingle{} Example\+: json\+\_\+pointer\+\_\+set(obj, \char`\"{}/foo/\%d/\%s\char`\"{}, value, 0, bak) This means, that you need to escape \textquotesingle{}\textquotesingle{} with \textquotesingle{}\%\textquotesingle{} (just like in printf())


\begin{DoxyParams}{Parameters}
{\em obj} & the json\+\_\+object instance/tree to which to add a sub-\/object \\
\hline
{\em path} & a (RFC6901) string notation for the sub-\/object to set in the tree \\
\hline
{\em value} & object to set at path\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative if an error (or not found), or 0 if succeeded 
\end{DoxyReturn}
\mbox{\Hypertarget{json__pointer_8h_a66f1f98a2ce085c19f6750193b4c726d}\label{json__pointer_8h_a66f1f98a2ce085c19f6750193b4c726d}} 
\index{json\_pointer.h@{json\_pointer.h}!json\_pointer\_setf@{json\_pointer\_setf}}
\index{json\_pointer\_setf@{json\_pointer\_setf}!json\_pointer.h@{json\_pointer.h}}
\doxysubsubsection{\texorpdfstring{json\_pointer\_setf()}{json\_pointer\_setf()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+pointer\+\_\+setf (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$$\ast$}]{obj,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{value,  }\item[{const char $\ast$}]{path\+\_\+fmt,  }\item[{}]{... }\end{DoxyParamCaption})}

This is a variant of \textquotesingle{}\mbox{\hyperlink{json__pointer_8h_aef0e651f63ce5ce35648503705e2586b}{json\+\_\+pointer\+\_\+set()}}\textquotesingle{} that supports printf() style arguments.

Example\+: json\+\_\+pointer\+\_\+setf(obj, value, \char`\"{}/foo/\%d/\%s\char`\"{}, 0, bak) This also means that you need to escape \textquotesingle{}\textquotesingle{} with \textquotesingle{}\%\textquotesingle{} (just like in printf())

Please take into consideration all recommended \textquotesingle{}printf()\textquotesingle{} format security aspects when using this function.


\begin{DoxyParams}{Parameters}
{\em obj} & the json\+\_\+object instance/tree to which to add a sub-\/object \\
\hline
{\em value} & object to set at path \\
\hline
{\em path\+\_\+fmt} & a printf() style format for the path\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
negative if an error (or not found), or 0 if succeeded 
\end{DoxyReturn}
