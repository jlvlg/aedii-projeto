\hypertarget{json__tokener_8h}{}\doxysection{src/libs/external/json-\/c/json\+\_\+tokener.h File Reference}
\label{json__tokener_8h}\index{src/libs/external/json-\/c/json\_tokener.h@{src/libs/external/json-\/c/json\_tokener.h}}


Methods to parse an input string into a tree of json\+\_\+object objects.  


{\ttfamily \#include \char`\"{}json\+\_\+object.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structjson__tokener__srec}{json\+\_\+tokener\+\_\+srec}}
\item 
struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{json__tokener_8h_a72be595cb7e090c70b1d29feb1cbfb16}{JSON\+\_\+\+TOKENER\+\_\+\+STRICT}}~0x01
\item 
\#define \mbox{\hyperlink{json__tokener_8h_aa74428c9cf57655eea5b49feae3f2704}{JSON\+\_\+\+TOKENER\+\_\+\+ALLOW\+\_\+\+TRAILING\+\_\+\+CHARS}}~0x02
\item 
\#define \mbox{\hyperlink{json__tokener_8h_a633ab043f2b07fd22420af2b369a260a}{JSON\+\_\+\+TOKENER\+\_\+\+VALIDATE\+\_\+\+UTF8}}~0x10
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} \mbox{\hyperlink{json__tokener_8h_a4dd5e5b65aee7f376f529f86b210ff49}{json\+\_\+tokener}}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{json__tokener_8h_af026dec71e4548e6200eb2f902f1c4e2}{json\+\_\+tokener\+\_\+state}} 
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
JSON\+\_\+\+EXPORT size\+\_\+t \mbox{\hyperlink{json__tokener_8h_a4a2fa28d815f8b370cbb00b80ebc0f1d}{json\+\_\+tokener\+\_\+get\+\_\+parse\+\_\+end}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok)
\item 
JSON\+\_\+\+EXPORT const char $\ast$ \mbox{\hyperlink{json__tokener_8h_af060dd6b593b3b710044bcb97dcec07f}{json\+\_\+tokener\+\_\+error\+\_\+desc}} (enum json\+\_\+tokener\+\_\+error jerr)
\item 
JSON\+\_\+\+EXPORT enum json\+\_\+tokener\+\_\+error \mbox{\hyperlink{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}{json\+\_\+tokener\+\_\+get\+\_\+error}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$ \mbox{\hyperlink{json__tokener_8h_a5ac7e2c350bc592cf2fa7b9935b00ef5}{json\+\_\+tokener\+\_\+new}} (void)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$ \mbox{\hyperlink{json__tokener_8h_a6a1583ddd434e13515d6232de813462e}{json\+\_\+tokener\+\_\+new\+\_\+ex}} (int depth)
\item 
JSON\+\_\+\+EXPORT void \mbox{\hyperlink{json__tokener_8h_a887c4661906fc6b36cc366304e522534}{json\+\_\+tokener\+\_\+free}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok)
\item 
JSON\+\_\+\+EXPORT void \mbox{\hyperlink{json__tokener_8h_a238649a59737be5152d525aeaf4153ab}{json\+\_\+tokener\+\_\+reset}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__tokener_8h_a236ef64d079822a4411d13eae7190c4d}{json\+\_\+tokener\+\_\+parse}} (const char $\ast$str)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__tokener_8h_a735f2dc755d57ed5c5b807aaaaef3b14}{json\+\_\+tokener\+\_\+parse\+\_\+verbose}} (const char $\ast$str, enum json\+\_\+tokener\+\_\+error $\ast$error)
\item 
JSON\+\_\+\+EXPORT void \mbox{\hyperlink{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}{json\+\_\+tokener\+\_\+set\+\_\+flags}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok, int flags)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex}} (struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$tok, const char $\ast$str, int len)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Methods to parse an input string into a tree of json\+\_\+object objects. 



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{json__tokener_8h_aa74428c9cf57655eea5b49feae3f2704}\label{json__tokener_8h_aa74428c9cf57655eea5b49feae3f2704}} 
\index{json\_tokener.h@{json\_tokener.h}!JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS@{JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS}}
\index{JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS@{JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS}{JSON\_TOKENER\_ALLOW\_TRAILING\_CHARS}}
{\footnotesize\ttfamily \#define JSON\+\_\+\+TOKENER\+\_\+\+ALLOW\+\_\+\+TRAILING\+\_\+\+CHARS~0x02}

Use with JSON\+\_\+\+TOKENER\+\_\+\+STRICT to allow trailing characters after the first parsed object.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}{json\+\_\+tokener\+\_\+set\+\_\+flags()}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{json__tokener_8h_a72be595cb7e090c70b1d29feb1cbfb16}\label{json__tokener_8h_a72be595cb7e090c70b1d29feb1cbfb16}} 
\index{json\_tokener.h@{json\_tokener.h}!JSON\_TOKENER\_STRICT@{JSON\_TOKENER\_STRICT}}
\index{JSON\_TOKENER\_STRICT@{JSON\_TOKENER\_STRICT}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{JSON\_TOKENER\_STRICT}{JSON\_TOKENER\_STRICT}}
{\footnotesize\ttfamily \#define JSON\+\_\+\+TOKENER\+\_\+\+STRICT~0x01}

Be strict when parsing JSON input. Use caution with this flag as what is considered valid may become more restrictive from one release to the next, causing your code to fail on previously working input.

Note that setting this will also effectively disable parsing of multiple json objects in a single character stream (e.\+g. \{\char`\"{}foo\char`\"{}\+:123\}\{\char`\"{}bar\char`\"{}\+:234\}); if you want to allow that also set JSON\+\_\+\+TOKENER\+\_\+\+ALLOW\+\_\+\+TRAILING\+\_\+\+CHARS

This flag is not set by default.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}{json\+\_\+tokener\+\_\+set\+\_\+flags()}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{json__tokener_8h_a633ab043f2b07fd22420af2b369a260a}\label{json__tokener_8h_a633ab043f2b07fd22420af2b369a260a}} 
\index{json\_tokener.h@{json\_tokener.h}!JSON\_TOKENER\_VALIDATE\_UTF8@{JSON\_TOKENER\_VALIDATE\_UTF8}}
\index{JSON\_TOKENER\_VALIDATE\_UTF8@{JSON\_TOKENER\_VALIDATE\_UTF8}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{JSON\_TOKENER\_VALIDATE\_UTF8}{JSON\_TOKENER\_VALIDATE\_UTF8}}
{\footnotesize\ttfamily \#define JSON\+\_\+\+TOKENER\+\_\+\+VALIDATE\+\_\+\+UTF8~0x10}

Cause \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} to validate that input is UTF8. If this flag is specified and validation fails, then json\+\_\+tokener\+\_\+get\+\_\+error(tok) will return json\+\_\+tokener\+\_\+error\+\_\+parse\+\_\+utf8\+\_\+string

This flag is not set by default.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}{json\+\_\+tokener\+\_\+set\+\_\+flags()}} 
\end{DoxySeeAlso}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{json__tokener_8h_a4dd5e5b65aee7f376f529f86b210ff49}\label{json__tokener_8h_a4dd5e5b65aee7f376f529f86b210ff49}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener@{json\_tokener}}
\index{json\_tokener@{json\_tokener}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener}{json\_tokener}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000004}{Deprecated}}]Unused in json-\/c code \end{DoxyRefDesc}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{json__tokener_8h_af026dec71e4548e6200eb2f902f1c4e2}\label{json__tokener_8h_af026dec71e4548e6200eb2f902f1c4e2}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_state@{json\_tokener\_state}}
\index{json\_tokener\_state@{json\_tokener\_state}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_state}{json\_tokener\_state}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{json__tokener_8h_af026dec71e4548e6200eb2f902f1c4e2}{json\+\_\+tokener\+\_\+state}}}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000002}{Deprecated}}]Don\textquotesingle{}t use this outside of json\+\_\+tokener.\+c, it will be made private in a future release. \end{DoxyRefDesc}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{json__tokener_8h_af060dd6b593b3b710044bcb97dcec07f}\label{json__tokener_8h_af060dd6b593b3b710044bcb97dcec07f}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_error\_desc@{json\_tokener\_error\_desc}}
\index{json\_tokener\_error\_desc@{json\_tokener\_error\_desc}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_error\_desc()}{json\_tokener\_error\_desc()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT const char$\ast$ json\+\_\+tokener\+\_\+error\+\_\+desc (\begin{DoxyParamCaption}\item[{enum json\+\_\+tokener\+\_\+error}]{jerr }\end{DoxyParamCaption})}

Given an error previously returned by \mbox{\hyperlink{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}{json\+\_\+tokener\+\_\+get\+\_\+error()}}, return a human readable description of the error.

\begin{DoxyReturn}{Returns}
a generic error message is returned if an invalid error value is provided. 
\end{DoxyReturn}
\mbox{\Hypertarget{json__tokener_8h_a887c4661906fc6b36cc366304e522534}\label{json__tokener_8h_a887c4661906fc6b36cc366304e522534}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_free@{json\_tokener\_free}}
\index{json\_tokener\_free@{json\_tokener\_free}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_free()}{json\_tokener\_free()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT void json\+\_\+tokener\+\_\+free (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok }\end{DoxyParamCaption})}

Free a \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} previously allocated with \mbox{\hyperlink{json__tokener_8h_a5ac7e2c350bc592cf2fa7b9935b00ef5}{json\+\_\+tokener\+\_\+new()}}. \mbox{\Hypertarget{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}\label{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_get\_error@{json\_tokener\_get\_error}}
\index{json\_tokener\_get\_error@{json\_tokener\_get\_error}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_get\_error()}{json\_tokener\_get\_error()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT enum json\+\_\+tokener\+\_\+error json\+\_\+tokener\+\_\+get\+\_\+error (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok }\end{DoxyParamCaption})}

Retrieve the error caused by the last call to \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}}, or json\+\_\+tokener\+\_\+success if there is no error.

When parsing a JSON string in pieces, if the tokener is in the middle of parsing this will return json\+\_\+tokener\+\_\+continue.

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{json__tokener_8h_af060dd6b593b3b710044bcb97dcec07f}{json\+\_\+tokener\+\_\+error\+\_\+desc()}}. 
\end{DoxySeeAlso}
\mbox{\Hypertarget{json__tokener_8h_a4a2fa28d815f8b370cbb00b80ebc0f1d}\label{json__tokener_8h_a4a2fa28d815f8b370cbb00b80ebc0f1d}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_get\_parse\_end@{json\_tokener\_get\_parse\_end}}
\index{json\_tokener\_get\_parse\_end@{json\_tokener\_get\_parse\_end}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_get\_parse\_end()}{json\_tokener\_get\_parse\_end()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT size\+\_\+t json\+\_\+tokener\+\_\+get\+\_\+parse\+\_\+end (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok }\end{DoxyParamCaption})}

Return the offset of the byte after the last byte parsed relative to the start of the most recent string passed in to \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}}. i.\+e. this is where parsing would start again if the input contains another JSON object after the currently parsed one.

Note that when multiple parse calls are issued, this is {\itshape not} the total number of characters parsed.

In the past this would have been accessed as tok-\/$>$char\+\_\+offset.

See \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} for an example of how to use this. \mbox{\Hypertarget{json__tokener_8h_a5ac7e2c350bc592cf2fa7b9935b00ef5}\label{json__tokener_8h_a5ac7e2c350bc592cf2fa7b9935b00ef5}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_new@{json\_tokener\_new}}
\index{json\_tokener\_new@{json\_tokener\_new}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_new()}{json\_tokener\_new()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}$\ast$ json\+\_\+tokener\+\_\+new (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Allocate a new \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}. When done using that to parse objects, free it with \mbox{\hyperlink{json__tokener_8h_a887c4661906fc6b36cc366304e522534}{json\+\_\+tokener\+\_\+free()}}. See \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} for usage details. \mbox{\Hypertarget{json__tokener_8h_a6a1583ddd434e13515d6232de813462e}\label{json__tokener_8h_a6a1583ddd434e13515d6232de813462e}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_new\_ex@{json\_tokener\_new\_ex}}
\index{json\_tokener\_new\_ex@{json\_tokener\_new\_ex}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_new\_ex()}{json\_tokener\_new\_ex()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}$\ast$ json\+\_\+tokener\+\_\+new\+\_\+ex (\begin{DoxyParamCaption}\item[{int}]{depth }\end{DoxyParamCaption})}

Allocate a new \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} with a custom max nesting depth. \begin{DoxySeeAlso}{See also}
JSON\+\_\+\+TOKENER\+\_\+\+DEFAULT\+\_\+\+DEPTH 
\end{DoxySeeAlso}
\mbox{\Hypertarget{json__tokener_8h_a236ef64d079822a4411d13eae7190c4d}\label{json__tokener_8h_a236ef64d079822a4411d13eae7190c4d}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_parse@{json\_tokener\_parse}}
\index{json\_tokener\_parse@{json\_tokener\_parse}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_parse()}{json\_tokener\_parse()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+tokener\+\_\+parse (\begin{DoxyParamCaption}\item[{const char $\ast$}]{str }\end{DoxyParamCaption})}

Parse a json\+\_\+object out of the string {\ttfamily str}.

If you need more control over how the parsing occurs, see \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}}. \mbox{\Hypertarget{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}\label{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_parse\_ex@{json\_tokener\_parse\_ex}}
\index{json\_tokener\_parse\_ex@{json\_tokener\_parse\_ex}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_parse\_ex()}{json\_tokener\_parse\_ex()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+tokener\+\_\+parse\+\_\+ex (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok,  }\item[{const char $\ast$}]{str,  }\item[{int}]{len }\end{DoxyParamCaption})}

Parse a string and return a non-\/\+NULL json\+\_\+object if a valid JSON value is found. The string does not need to be a JSON object or array; it can also be a string, number or boolean value.

A partial JSON string can be parsed. If the parsing is incomplete, NULL will be returned and \mbox{\hyperlink{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}{json\+\_\+tokener\+\_\+get\+\_\+error()}} will return json\+\_\+tokener\+\_\+continue. \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} can then be called with additional bytes in str to continue the parsing.

If \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} returns NULL and the error is anything other than json\+\_\+tokener\+\_\+continue, a fatal error has occurred and parsing must be halted. Then, the tok object must not be reused until \mbox{\hyperlink{json__tokener_8h_a238649a59737be5152d525aeaf4153ab}{json\+\_\+tokener\+\_\+reset()}} is called.

When a valid JSON value is parsed, a non-\/\+NULL json\+\_\+object will be returned, with a reference count of one which belongs to the caller. Also, \mbox{\hyperlink{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}{json\+\_\+tokener\+\_\+get\+\_\+error()}} will return json\+\_\+tokener\+\_\+success. Be sure to check the type with \mbox{\hyperlink{json__object_8h_a8ab506a3d8f4ba5eb6a12ce0a6bbd37b}{json\+\_\+object\+\_\+is\+\_\+type()}} or \mbox{\hyperlink{json__object_8h_af256a3a7910e271a2b9735e5044c3827}{json\+\_\+object\+\_\+get\+\_\+type()}} before using the object.

Trailing characters after the parsed value do not automatically cause an error. It is up to the caller to decide whether to treat this as an error or to handle the additional characters, perhaps by parsing another json value starting from that point.

If the caller knows that they are at the end of their input, the length passed MUST include the final \textquotesingle{}\textbackslash{}0\textquotesingle{} character, so values with no inherent end (i.\+e. numbers) can be properly parsed, rather than just returning json\+\_\+tokener\+\_\+continue.

Extra characters can be detected by comparing the value returned by \mbox{\hyperlink{json__tokener_8h_a4a2fa28d815f8b370cbb00b80ebc0f1d}{json\+\_\+tokener\+\_\+get\+\_\+parse\+\_\+end()}} against the length of the last len parameter passed in.

The tokener does {\bfseries{not}} maintain an internal buffer so the caller is responsible for a subsequent call to json\+\_\+tokener\+\_\+parse\+\_\+ex with an appropriate str parameter starting with the extra characters.

This interface is presently not 64-\/bit clean due to the int len argument so the function limits the maximum string size to INT32\+\_\+\+MAX (2GB). If the function is called with len == -\/1 then strlen is called to check the string length is less than INT32\+\_\+\+MAX (2GB)

Example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\_object}} *jobj = NULL;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{char} *mystring = NULL;}
\DoxyCodeLine{\textcolor{keywordtype}{int} stringlen = 0;}
\DoxyCodeLine{\textcolor{keyword}{enum} json\_tokener\_error jerr;}
\DoxyCodeLine{\textcolor{keywordflow}{do} \{}
\DoxyCodeLine{    mystring = ...  \textcolor{comment}{// get JSON string, e.g. read from file, etc...}}
\DoxyCodeLine{    stringlen = strlen(mystring);}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (end\_of\_input)}
\DoxyCodeLine{        stringlen++;  \textcolor{comment}{// Include the '\(\backslash\)0' if we know we're at the end of input}}
\DoxyCodeLine{    jobj = \mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\_tokener\_parse\_ex}}(tok, mystring, stringlen);}
\DoxyCodeLine{\} \textcolor{keywordflow}{while} ((jerr = \mbox{\hyperlink{json__tokener_8h_af5d7ffd95a0f6e5d5bb5994d233b4197}{json\_tokener\_get\_error}}(tok)) == json\_tokener\_continue);}
\DoxyCodeLine{\textcolor{keywordflow}{if} (jerr != json\_tokener\_success)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    fprintf(stderr, \textcolor{stringliteral}{"{}Error: \%s\(\backslash\)n"{}}, \mbox{\hyperlink{json__tokener_8h_af060dd6b593b3b710044bcb97dcec07f}{json\_tokener\_error\_desc}}(jerr));}
\DoxyCodeLine{    \textcolor{comment}{// Handle errors, as appropriate for your application.}}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{keywordflow}{if} (\mbox{\hyperlink{json__tokener_8h_a4a2fa28d815f8b370cbb00b80ebc0f1d}{json\_tokener\_get\_parse\_end}}(tok) < stringlen)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{comment}{// Handle extra characters after parsed object as desired.}}
\DoxyCodeLine{    \textcolor{comment}{// e.g. issue an error, parse another object from that point, etc...}}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{comment}{// Success, use jobj here.}}

\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em tok} & a \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} previously allocated with \mbox{\hyperlink{json__tokener_8h_a5ac7e2c350bc592cf2fa7b9935b00ef5}{json\+\_\+tokener\+\_\+new()}} \\
\hline
{\em str} & an string with any valid JSON expression, or portion of. This does not need to be null terminated. \\
\hline
{\em len} & the length of str \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{json__tokener_8h_a735f2dc755d57ed5c5b807aaaaef3b14}\label{json__tokener_8h_a735f2dc755d57ed5c5b807aaaaef3b14}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_parse\_verbose@{json\_tokener\_parse\_verbose}}
\index{json\_tokener\_parse\_verbose@{json\_tokener\_parse\_verbose}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_parse\_verbose()}{json\_tokener\_parse\_verbose()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+tokener\+\_\+parse\+\_\+verbose (\begin{DoxyParamCaption}\item[{const char $\ast$}]{str,  }\item[{enum json\+\_\+tokener\+\_\+error $\ast$}]{error }\end{DoxyParamCaption})}

Parser a json\+\_\+object out of the string {\ttfamily str}, but if it fails return the error in {\ttfamily $\ast$error}. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{json__tokener_8h_a236ef64d079822a4411d13eae7190c4d}{json\+\_\+tokener\+\_\+parse()}} 

\mbox{\hyperlink{json__tokener_8h_a61679f178111963a9ffa3c8179553f7a}{json\+\_\+tokener\+\_\+parse\+\_\+ex()}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{json__tokener_8h_a238649a59737be5152d525aeaf4153ab}\label{json__tokener_8h_a238649a59737be5152d525aeaf4153ab}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_reset@{json\_tokener\_reset}}
\index{json\_tokener\_reset@{json\_tokener\_reset}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_reset()}{json\_tokener\_reset()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT void json\+\_\+tokener\+\_\+reset (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok }\end{DoxyParamCaption})}

Reset the state of a \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}}, to prepare to parse a brand new JSON object. \mbox{\Hypertarget{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}\label{json__tokener_8h_a7e7a0c0c9dc79e5e47b2608bb8aad7b7}} 
\index{json\_tokener.h@{json\_tokener.h}!json\_tokener\_set\_flags@{json\_tokener\_set\_flags}}
\index{json\_tokener\_set\_flags@{json\_tokener\_set\_flags}!json\_tokener.h@{json\_tokener.h}}
\doxysubsubsection{\texorpdfstring{json\_tokener\_set\_flags()}{json\_tokener\_set\_flags()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT void json\+\_\+tokener\+\_\+set\+\_\+flags (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structjson__tokener}{json\+\_\+tokener}} $\ast$}]{tok,  }\item[{int}]{flags }\end{DoxyParamCaption})}

Set flags that control how parsing will be done. 