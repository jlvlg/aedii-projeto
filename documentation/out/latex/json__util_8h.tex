\hypertarget{json__util_8h}{}\doxysection{src/libs/external/json-\/c/json\+\_\+util.h File Reference}
\label{json__util_8h}\index{src/libs/external/json-\/c/json\_util.h@{src/libs/external/json-\/c/json\_util.h}}


Miscllaneous utility functions and macros.  


{\ttfamily \#include \char`\"{}json\+\_\+object.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__util_8h_a03119ec0a71af4eee95318e9b2aaf05b}{json\+\_\+object\+\_\+from\+\_\+file}} (const char $\ast$filename)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__util_8h_a88c5c7ce735d95f6c3c81c73475e14aa}{json\+\_\+object\+\_\+from\+\_\+fd\+\_\+ex}} (int fd, int depth)
\item 
JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$ \mbox{\hyperlink{json__util_8h_a5b72bf6f3ac8fb03da38d2e2d1e18d1b}{json\+\_\+object\+\_\+from\+\_\+fd}} (int fd)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_a486fc95fafe7cb91c58c7f6487036bc5}{json\+\_\+object\+\_\+to\+\_\+file}} (const char $\ast$filename, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_a68a7385c555cf21797e361d1d4de3441}{json\+\_\+object\+\_\+to\+\_\+file\+\_\+ext}} (const char $\ast$filename, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj, int flags)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_afd492c120e359d2d75b67da96b580661}{json\+\_\+object\+\_\+to\+\_\+fd}} (int fd, struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$obj, int flags)
\item 
JSON\+\_\+\+EXPORT const char $\ast$ \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err}} (void)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_a9d9a63936cdae6639b9cdd87fdd13506}{json\+\_\+parse\+\_\+int64}} (const char $\ast$buf, int64\+\_\+t $\ast$retval)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_a94c2340c1344d57f7aa067f2dd0407f9}{json\+\_\+parse\+\_\+uint64}} (const char $\ast$buf, uint64\+\_\+t $\ast$retval)
\item 
JSON\+\_\+\+EXPORT int \mbox{\hyperlink{json__util_8h_a3f0f0b8f29a41b47d62e6c867707be50}{json\+\_\+parse\+\_\+double}} (const char $\ast$buf, double $\ast$retval)
\item 
JSON\+\_\+\+EXPORT const char $\ast$ \mbox{\hyperlink{json__util_8h_a762aaf3df0a9c7b6919cdc1035348012}{json\+\_\+type\+\_\+to\+\_\+name}} (enum json\+\_\+type o\+\_\+type)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Miscllaneous utility functions and macros. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{json__util_8h_a5b72bf6f3ac8fb03da38d2e2d1e18d1b}\label{json__util_8h_a5b72bf6f3ac8fb03da38d2e2d1e18d1b}} 
\index{json\_util.h@{json\_util.h}!json\_object\_from\_fd@{json\_object\_from\_fd}}
\index{json\_object\_from\_fd@{json\_object\_from\_fd}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_from\_fd()}{json\_object\_from\_fd()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+object\+\_\+from\+\_\+fd (\begin{DoxyParamCaption}\item[{int}]{fd }\end{DoxyParamCaption})}

Create a JSON object from an already opened file descriptor, using the default maximum object depth. (JSON\+\_\+\+TOKENER\+\_\+\+DEFAULT\+\_\+\+DEPTH)

See \mbox{\hyperlink{json__util_8h_a88c5c7ce735d95f6c3c81c73475e14aa}{json\+\_\+object\+\_\+from\+\_\+fd\+\_\+ex()}} for details. \mbox{\Hypertarget{json__util_8h_a88c5c7ce735d95f6c3c81c73475e14aa}\label{json__util_8h_a88c5c7ce735d95f6c3c81c73475e14aa}} 
\index{json\_util.h@{json\_util.h}!json\_object\_from\_fd\_ex@{json\_object\_from\_fd\_ex}}
\index{json\_object\_from\_fd\_ex@{json\_object\_from\_fd\_ex}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_from\_fd\_ex()}{json\_object\_from\_fd\_ex()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+object\+\_\+from\+\_\+fd\+\_\+ex (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{int}]{depth }\end{DoxyParamCaption})}

Create a JSON object from already opened file descriptor.

This function can be helpful, when you opened the file already, e.\+g. when you have a temp file. Note, that the fd must be readable at the actual position, i.\+e. use lseek(fd, 0, SEEK\+\_\+\+SET) before.

The depth argument specifies the maximum object depth to pass to \mbox{\hyperlink{json__tokener_8h_a6a1583ddd434e13515d6232de813462e}{json\+\_\+tokener\+\_\+new\+\_\+ex()}}. When depth == -\/1, JSON\+\_\+\+TOKENER\+\_\+\+DEFAULT\+\_\+\+DEPTH is used instead.

Returns NULL on failure. See \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err()}} for details. \mbox{\Hypertarget{json__util_8h_a03119ec0a71af4eee95318e9b2aaf05b}\label{json__util_8h_a03119ec0a71af4eee95318e9b2aaf05b}} 
\index{json\_util.h@{json\_util.h}!json\_object\_from\_file@{json\_object\_from\_file}}
\index{json\_object\_from\_file@{json\_object\_from\_file}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_from\_file()}{json\_object\_from\_file()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}}$\ast$ json\+\_\+object\+\_\+from\+\_\+file (\begin{DoxyParamCaption}\item[{const char $\ast$}]{filename }\end{DoxyParamCaption})}

Read the full contents of the given file, then convert it to a json\+\_\+object using \mbox{\hyperlink{json__tokener_8h_a236ef64d079822a4411d13eae7190c4d}{json\+\_\+tokener\+\_\+parse()}}.

Returns NULL on failure. See \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err()}} for details. \mbox{\Hypertarget{json__util_8h_afd492c120e359d2d75b67da96b580661}\label{json__util_8h_afd492c120e359d2d75b67da96b580661}} 
\index{json\_util.h@{json\_util.h}!json\_object\_to\_fd@{json\_object\_to\_fd}}
\index{json\_object\_to\_fd@{json\_object\_to\_fd}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_to\_fd()}{json\_object\_to\_fd()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+object\+\_\+to\+\_\+fd (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj,  }\item[{int}]{flags }\end{DoxyParamCaption})}

Convert the json\+\_\+object to a string and write it to the file descriptor. Handles partial writes and will keep writing until done, or an error occurs.


\begin{DoxyParams}{Parameters}
{\em fd} & an open, writable file descriptor to write to \\
\hline
{\em obj} & the object to serializer and write \\
\hline
{\em flags} & flags to pass to \mbox{\hyperlink{json__object_8h_a9db613127bd4ef7db42307e43a85fc1b}{json\+\_\+object\+\_\+to\+\_\+json\+\_\+string\+\_\+ext()}} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 if something fails. See \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err()}} for details. 
\end{DoxyReturn}
\mbox{\Hypertarget{json__util_8h_a486fc95fafe7cb91c58c7f6487036bc5}\label{json__util_8h_a486fc95fafe7cb91c58c7f6487036bc5}} 
\index{json\_util.h@{json\_util.h}!json\_object\_to\_file@{json\_object\_to\_file}}
\index{json\_object\_to\_file@{json\_object\_to\_file}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_to\_file()}{json\_object\_to\_file()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+object\+\_\+to\+\_\+file (\begin{DoxyParamCaption}\item[{const char $\ast$}]{filename,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj }\end{DoxyParamCaption})}

Equivalent to\+: json\+\_\+object\+\_\+to\+\_\+file\+\_\+ext(filename, obj, JSON\+\_\+\+C\+\_\+\+TO\+\_\+\+STRING\+\_\+\+PLAIN);

Returns -\/1 if something fails. See \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err()}} for details. \mbox{\Hypertarget{json__util_8h_a68a7385c555cf21797e361d1d4de3441}\label{json__util_8h_a68a7385c555cf21797e361d1d4de3441}} 
\index{json\_util.h@{json\_util.h}!json\_object\_to\_file\_ext@{json\_object\_to\_file\_ext}}
\index{json\_object\_to\_file\_ext@{json\_object\_to\_file\_ext}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_object\_to\_file\_ext()}{json\_object\_to\_file\_ext()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+object\+\_\+to\+\_\+file\+\_\+ext (\begin{DoxyParamCaption}\item[{const char $\ast$}]{filename,  }\item[{struct \mbox{\hyperlink{json__types_8h_af27907ced0f5a43409ad96430fe0f914}{json\+\_\+object}} $\ast$}]{obj,  }\item[{int}]{flags }\end{DoxyParamCaption})}

Open and truncate the given file, creating it if necessary, then convert the json\+\_\+object to a string and write it to the file.

Returns -\/1 if something fails. See \mbox{\hyperlink{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}{json\+\_\+util\+\_\+get\+\_\+last\+\_\+err()}} for details. \mbox{\Hypertarget{json__util_8h_a3f0f0b8f29a41b47d62e6c867707be50}\label{json__util_8h_a3f0f0b8f29a41b47d62e6c867707be50}} 
\index{json\_util.h@{json\_util.h}!json\_parse\_double@{json\_parse\_double}}
\index{json\_parse\_double@{json\_parse\_double}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_parse\_double()}{json\_parse\_double()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+parse\+\_\+double (\begin{DoxyParamCaption}\item[{const char $\ast$}]{buf,  }\item[{double $\ast$}]{retval }\end{DoxyParamCaption})}

\begin{DoxyRefDesc}{Deprecated}
\item[\mbox{\hyperlink{deprecated__deprecated000008}{Deprecated}}]\end{DoxyRefDesc}
\mbox{\Hypertarget{json__util_8h_a9d9a63936cdae6639b9cdd87fdd13506}\label{json__util_8h_a9d9a63936cdae6639b9cdd87fdd13506}} 
\index{json\_util.h@{json\_util.h}!json\_parse\_int64@{json\_parse\_int64}}
\index{json\_parse\_int64@{json\_parse\_int64}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_parse\_int64()}{json\_parse\_int64()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+parse\+\_\+int64 (\begin{DoxyParamCaption}\item[{const char $\ast$}]{buf,  }\item[{int64\+\_\+t $\ast$}]{retval }\end{DoxyParamCaption})}

A parsing helper for integer values. Returns 0 on success, with the parsed value assigned to $\ast$retval. Overflow/underflow are NOT considered errors, but errno will be set to ERANGE, just like the strtol/strtoll functions do. \mbox{\Hypertarget{json__util_8h_a94c2340c1344d57f7aa067f2dd0407f9}\label{json__util_8h_a94c2340c1344d57f7aa067f2dd0407f9}} 
\index{json\_util.h@{json\_util.h}!json\_parse\_uint64@{json\_parse\_uint64}}
\index{json\_parse\_uint64@{json\_parse\_uint64}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_parse\_uint64()}{json\_parse\_uint64()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT int json\+\_\+parse\+\_\+uint64 (\begin{DoxyParamCaption}\item[{const char $\ast$}]{buf,  }\item[{uint64\+\_\+t $\ast$}]{retval }\end{DoxyParamCaption})}

A parsing help for integer values, providing one extra bit of magnitude beyond \mbox{\hyperlink{json__util_8h_a9d9a63936cdae6639b9cdd87fdd13506}{json\+\_\+parse\+\_\+int64()}}. \mbox{\Hypertarget{json__util_8h_a762aaf3df0a9c7b6919cdc1035348012}\label{json__util_8h_a762aaf3df0a9c7b6919cdc1035348012}} 
\index{json\_util.h@{json\_util.h}!json\_type\_to\_name@{json\_type\_to\_name}}
\index{json\_type\_to\_name@{json\_type\_to\_name}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_type\_to\_name()}{json\_type\_to\_name()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT const char$\ast$ json\+\_\+type\+\_\+to\+\_\+name (\begin{DoxyParamCaption}\item[{enum json\+\_\+type}]{o\+\_\+type }\end{DoxyParamCaption})}

Return a string describing the type of the object. e.\+g. \char`\"{}int\char`\"{}, or \char`\"{}object\char`\"{}, etc... \mbox{\Hypertarget{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}\label{json__util_8h_a9fe4dbb5fe32850cdc22a97454e4500b}} 
\index{json\_util.h@{json\_util.h}!json\_util\_get\_last\_err@{json\_util\_get\_last\_err}}
\index{json\_util\_get\_last\_err@{json\_util\_get\_last\_err}!json\_util.h@{json\_util.h}}
\doxysubsubsection{\texorpdfstring{json\_util\_get\_last\_err()}{json\_util\_get\_last\_err()}}
{\footnotesize\ttfamily JSON\+\_\+\+EXPORT const char$\ast$ json\+\_\+util\+\_\+get\+\_\+last\+\_\+err (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Return the last error from various json-\/c functions, including\+: json\+\_\+object\+\_\+to\+\_\+file\{,{\itshape ext\}, \mbox{\hyperlink{json__util_8h_afd492c120e359d2d75b67da96b580661}{json\+\_\+object\+\_\+to\+\_\+fd()}} or json\+\_\+object\+\_\+from}\{file,fd\}, or NULL if there is none. 